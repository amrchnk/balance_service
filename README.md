# Тестовое задание на позицию стажера-бекендера

## Задача

Необходимо реализовать микросервис для работы с балансом пользователей (зачисление средств, списание средств, перевод средств от пользователя к пользователю, а также метод получения баланса пользователя). Сервис должен предоставлять HTTP API и принимать/отдавать запросы/ответы в формате JSON.

[Подробнее...](https://github.com/avito-tech/autumn-2021-intern-assignment)

##API-методы

***Метод начисления средств на баланс***

```
http://localhost:8000/balance/:type [POST]
```

Запрос:

```http://localhost:8000/balance/increase```

Тело запроса:

```
{
    "user_id": 1,
    "balance": 400.45
}
```

Ответ (при успешном создании счета и зачислении средств):
```
{
    "id": 1,
    "message": "Current balance in rubles: 400.45",
    "status": 200
}
```

***Метод списания средств с баланса***

Запрос:

```http://localhost:8000/balance/decrease```

Тело запроса:

```
{
    "user_id": 1,
    "balance": 130
}
```

Ответ (при успешном списании средств со счета):
```
{
    "id": 1,
    "message": "Current balance in rubles: 270.45",
    "status": 200
}
```

Ответ (при попытке снятия средств сверх остатка):
```
{
    "message": "pq: новая строка в отношении \"balance\" нарушает ограничение-проверку 
    \"balance_balance_check\"",
    "status": 500
}
```

***Метод получения текущего баланса пользователя***

```
http://localhost:8000/balance/:id [GET]
```

Запрос:
```
localhost:8000/balance/1
```

Ответ:
```
{
    "user_id": 1,
    "currency": "RUB",
    "balance": 270.45
}
```

При указании доп. параметра currency

Запрос:
```
localhost:8000/balance/1?currency=USD
```
Ответ:
```
{
    "user_id": 1,
    "currency": "USD",
    "balance": 3.7
}
```

***Метод перевода средств от пользователя к пользователю***

Запрос:
```
localhost:8000/balance/transfer [GET]
```
Тело запроса:
```
{
    "sender_id":1,
    "receiver_id":2,
    "sum":70
}
```
Ответ (пользователь с id=2 был создан после получения тела запроса):
```
{
    "sender_id": 1,
    "sender_balance": 200.45,
    "receiver_id": 2,
    "receiver_balance": 70
}
```
***Метод получения списка транзакций***

Получение списка всех транзакций определенного пользователя


## Запуск приложения